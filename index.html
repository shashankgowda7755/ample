<!DOCTYPE html>
<html lang="en" class="light">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>PureShores | Restore. Revive. Renew.</title>
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- HTML2Canvas & jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Cropper.js -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />

    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#0EA5E9", // Sky blue brand color
                        secondary: "#F97316", // Orange accent
                        "background-light": "#F0F9FF", // Very light blue tint
                        "background-dark": "#0F172A", // Dark slate
                        "surface-light": "#FFFFFF",
                        "surface-dark": "#1E293B",
                        "text-main-light": "#1E293B",
                        "text-main-dark": "#F1F5F9",
                        "text-muted-light": "#64748B",
                        "text-muted-dark": "#94A3B8",
                    },
                    fontFamily: {
                        display: ['"DM Serif Display"', 'serif'],
                        sans: ['"Inter"', 'sans-serif'],
                    },
                    borderRadius: {
                        DEFAULT: "0.375rem",
                    },
                    animation: {
                        "fade-in-up": "fadeInUp 0.5s ease-out forwards",
                    },
                    keyframes: {
                        fadeInUp: {
                            "0%": { opacity: "0", transform: "translateY(20px)" },
                            "100%": { opacity: "1", transform: "translateY(0)" },
                        },
                    }
                },
            },
        };
    </script>
    <style>
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeInUp 0.5s ease-out forwards;
        }

        /* Cropper Overrides for Light Theme */
        .cropper-view-box,
        .cropper-face {
            border-radius: 50%;
        }

        .cropper-view-box {
            outline: 2px solid #0EA5E9;
            box-shadow: 0 0 0 1px #0EA5E9;
        }

        /* Loader */
        .loader {
            width: 48px;
            height: 48px;
            border: 3px solid #0EA5E9;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            box-sizing: border-box;
            animation: rotation 1s linear infinite;
        }

        @keyframes rotation {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-text-main-light dark:text-text-main-dark font-sans selection:bg-primary selection:text-white transition-colors duration-300">

    <!-- Header (Shared) -->
    <header
        class="sticky top-0 z-50 bg-background-light/95 dark:bg-background-dark/95 backdrop-blur-sm border-b border-slate-200 dark:border-slate-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center flex-shrink-0 cursor-pointer" onclick="goToStep('landing')">
                    <img src="logo.svg" alt="Company Logo" class="h-10 w-auto" />
                </div>
                <!-- Nav removed as per user request -->
                <div class="hidden md:flex items-center space-x-6">
                    <div class="flex flex-col items-end text-xs leading-none">
                        <span class="text-slate-500 dark:text-slate-400 font-semibold mb-0.5">PARTNER</span>
                        <span class="text-primary font-bold">GreenAlliance</span>
                    </div>
                    <!-- Donate triggers form step -->
                    <button onclick="goToStep('form')"
                        class="bg-secondary hover:bg-orange-600 text-white px-6 py-2.5 rounded-full font-semibold shadow-lg shadow-orange-500/20 transition-all transform hover:-translate-y-0.5">
                        Donate
                    </button>
                </div>
                <!-- Mobile Menu Button -->
                <div class="md:hidden flex items-center">
                    <button class="text-slate-600 dark:text-slate-300 hover:text-primary">
                        <span class="material-icons-outlined">menu</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- STEP 1: LANDING PAGE -->
        <div id="step-landing" class="step active">
            <section class="relative h-[800px] flex items-center overflow-hidden">
                <div class="absolute inset-0 z-0">
                    <img alt="Beautiful turquoise ocean waves crashing on a sandy beach"
                        class="w-full h-full object-cover"
                        src="https://lh3.googleusercontent.com/aida-public/AB6AXuBOtE7p3kgBPZiAWANBygqmTB-2y98TJhGXVOIEL_4eCb7Ki0_p9Vlw3gk2dg2p_mcQGxEP-lQGSTQsiW_1GXMsLoWTu6axNhd0wyFjZINgo1oXfP2c-byrDIg4HqgdUnj0ZeuszVM1LCGW4aAtJDJN9WI6vKldgl2d17m6n38unFTQEFvOQk7XCEBBHsfL1kEeDZ9Mj5-tq7g7bWEJEAyTkdWm8uBNWAf52v2fWGhbNXBVYg15T1skzR9UdkCDxsDmxFWcYlF5XFs" />
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-slate-900/60 to-slate-900/10 dark:from-black/70 dark:to-black/30">
                    </div>
                </div>
                <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full pt-12">
                    <h1 class="font-display text-5xl md:text-6xl lg:text-7xl text-white leading-tight mb-6">
                        Thank You for Taking Responsibility for Our Beaches
                    </h1>
                    <div class="flex items-start mb-10 max-w-2xl">
                        <div class="w-1 h-16 bg-secondary mr-6 mt-1 flex-shrink-0"></div>
                        <p class="text-lg md:text-xl text-slate-100 font-light leading-relaxed">
                            Every small action matters.
                            By showing up for the beach cleanup, you helped protect marine life, preserve coastlines,
                            and inspire others to care.
                        </p>
                    </div>
                    <div class="flex flex-col sm:flex-row gap-4">
                        <!-- Triggers form step -->
                        <button onclick="goToStep('form')"
                            class="inline-flex justify-center items-center bg-primary hover:bg-sky-600 text-white px-8 py-3.5 rounded font-bold transition-all shadow-lg shadow-sky-500/30">
                            <span class="material-icons-outlined text-sm mr-2">download</span>
                            Generate & Download Your Certificate
                        </button>
                    </div>
                </div>
            </section>

            <!-- SECTION 2: WHAT YOU WERE PART OF -->
            <section class="relative z-20 mt-8 lg:mt-12 pb-12 lg:pb-24">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative">
                    <div
                        class="bg-surface-light dark:bg-slate-900 rounded-[2rem] shadow-xl overflow-hidden border border-slate-200 dark:border-slate-700/50 p-8 md:p-12">
                        <div class="text-center mb-16">
                            <span class="text-secondary font-bold tracking-widest uppercase text-sm mb-3 block">What You
                                Were Part Of</span>
                            <h2 class="font-display text-3xl md:text-4xl text-slate-900 dark:text-white">The Actions
                                That Made an Impact</h2>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                            <!-- Item 1 -->
                            <div class="flex flex-col items-center text-center group">
                                <div
                                    class="w-20 h-20 rounded-2xl bg-sky-100 dark:bg-sky-900/30 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                    <span class="text-4xl">üê¢</span>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800 dark:text-white mb-4">Turtle Walks</h3>
                                <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
                                    Helping protect nesting grounds and ensuring safe paths for turtles during critical
                                    periods.
                                </p>
                            </div>

                            <!-- Item 2 -->
                            <div class="flex flex-col items-center text-center group">
                                <div
                                    class="w-20 h-20 rounded-2xl bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                    <span class="text-4xl">üåä</span>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800 dark:text-white mb-4">Beach Cleanup Drives
                                </h3>
                                <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
                                    Removing plastic, waste, and harmful materials from shorelines to protect marine
                                    ecosystems.
                                </p>
                            </div>

                            <!-- Item 3 -->
                            <div class="flex flex-col items-center text-center group">
                                <div
                                    class="w-20 h-20 rounded-2xl bg-green-100 dark:bg-green-900/30 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                                    <span class="text-4xl">‚ôªÔ∏è</span>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800 dark:text-white mb-4">Waste Collection &
                                    Segregation</h3>
                                <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
                                    Collecting and responsibly handling waste so it doesn‚Äôt return to the ocean.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- SECTION 3: YOUR ROLE MATTERS -->
            <section class="py-20 lg:py-24 bg-background-light dark:bg-background-dark">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                        <div>
                            <h2
                                class="font-display text-5xl lg:text-6xl text-slate-900 dark:text-white leading-tight mb-8">
                                One Person.<br />
                                <span class="text-primary">One Day.</span><br />
                                Real Impact.
                            </h2>
                            <div
                                class="bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-100 dark:border-slate-700">
                                <p class="text-lg font-bold text-secondary mb-4">Your participation truly matters.</p>
                                <p class="text-slate-600 dark:text-slate-300 leading-relaxed mb-0">
                                    You may have joined for a few hours, but the impact of your action lasts much
                                    longer.
                                </p>
                            </div>
                        </div>
                        <div class="space-y-8">
                            <h3 class="text-2xl font-bold text-slate-800 dark:text-white">Cleaner beaches mean:</h3>

                            <div class="flex items-start gap-6 group">
                                <div
                                    class="w-12 h-12 rounded-full bg-teal-100 dark:bg-teal-900/30 flex-shrink-0 flex items-center justify-center text-teal-600 dark:text-teal-400">
                                    <span class="material-icons-outlined">verified_user</span>
                                </div>
                                <div>
                                    <h4 class="text-xl font-bold text-slate-900 dark:text-white mb-2">Safer marine life
                                    </h4>
                                </div>
                            </div>

                            <div class="flex items-start gap-6 group">
                                <div
                                    class="w-12 h-12 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex-shrink-0 flex items-center justify-center text-emerald-600 dark:text-emerald-400">
                                    <span class="material-icons-outlined">spa</span>
                                </div>
                                <div>
                                    <h4 class="text-xl font-bold text-slate-900 dark:text-white mb-2">Healthier
                                        ecosystems</h4>
                                </div>
                            </div>

                            <div class="flex items-start gap-6 group">
                                <div
                                    class="w-12 h-12 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex-shrink-0 flex items-center justify-center text-indigo-600 dark:text-indigo-400">
                                    <span class="material-icons-outlined">deck</span>
                                </div>
                                <div>
                                    <h4 class="text-xl font-bold text-slate-900 dark:text-white mb-2">Better coastal
                                        communities</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- SECTION 5: OTHER EVENTS & PARTICIPATION -->
            <section class="py-12 pb-24 bg-slate-50 dark:bg-slate-800/50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="max-w-3xl mx-auto text-center mb-16">
                        <h2 class="font-display text-4xl text-slate-900 dark:text-white mb-6">Want to Be Part of More
                            Cleanup Drives or Events?</h2>
                        <p class="text-lg text-slate-600 dark:text-slate-300">We regularly organize and collaborate on:
                        </p>

                        <div class="flex flex-wrap justify-center gap-4 mt-8">
                            <span
                                class="px-6 py-2 bg-white dark:bg-slate-800 rounded-full shadow-sm text-slate-700 dark:text-slate-300 font-medium">Beach
                                cleanups</span>
                            <span
                                class="px-6 py-2 bg-white dark:bg-slate-800 rounded-full shadow-sm text-slate-700 dark:text-slate-300 font-medium">Turtle
                                walks</span>
                            <span
                                class="px-6 py-2 bg-white dark:bg-slate-800 rounded-full shadow-sm text-slate-700 dark:text-slate-300 font-medium">Environmental
                                awareness activities</span>
                            <span
                                class="px-6 py-2 bg-white dark:bg-slate-800 rounded-full shadow-sm text-slate-700 dark:text-slate-300 font-medium">Community-driven
                                sustainability initiatives</span>
                        </div>

                        <div
                            class="mt-12 p-8 bg-sky-50 dark:bg-sky-900/10 rounded-2xl border border-sky-100 dark:border-sky-800">
                            <p class="text-slate-800 dark:text-slate-200 font-medium mb-4">
                                If you‚Äôd like to participate in upcoming events or collaborate with us, reach out to us.
                            </p>
                            <div class="inline-flex items-center gap-2 text-xl font-bold text-primary">
                                <span class="material-icons-outlined">email</span>
                                <a href="mailto:support@gmail.com" class="hover:underline">support@gmail.com</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 4: CERTIFICATE DOWNLOAD CTA -->
            <section class="py-20 bg-primary relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-primary to-sky-600"></div>
                <!-- Decorative circles -->
                <div class="absolute top-0 right-0 p-12 opacity-10 transform translate-x-1/2 -translate-y-1/2">
                    <div class="w-96 h-96 rounded-full border-8 border-white"></div>
                </div>

                <div class="relative z-10 max-w-4xl mx-auto px-4 text-center">
                    <div class="bg-white/10 backdrop-blur-md rounded-[2rem] p-12 border border-white/20 shadow-2xl">
                        <h2 class="font-display text-4xl md:text-5xl text-white mb-6">Get Your Participation Certificate
                        </h2>
                        <p class="text-xl text-sky-100 mb-10 max-w-2xl mx-auto">
                            Click below to generate your personalized certificate. You‚Äôll be able to preview it before
                            downloading.
                        </p>
                        <button onclick="goToStep('form')"
                            class="inline-flex justify-center items-center bg-white text-primary hover:bg-sky-50 px-10 py-5 rounded-full font-bold text-xl transition-all shadow-xl transform hover:-translate-y-1">
                            <span class="material-icons-outlined mr-2">verified</span>
                            Generate My Certificate
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- STEP 2: FORM (RESTORED AS SEPARATE STEP) -->
        <div id="step-form" class="step">
            <div class="w-full py-20 min-h-screen flex items-center justify-center bg-background-light">
                <!-- PureShores Form Card -->
                <div class="max-w-2xl w-full mx-4">
                    <div
                        class="bg-surface-light rounded-[2rem] shadow-2xl overflow-hidden border border-slate-200 z-10 relative">
                        <div class="p-8 md:p-12">
                            <div class="text-center mb-10">
                                <span class="text-secondary font-bold tracking-widest uppercase text-sm mb-2 block">Take
                                    Action</span>
                                <h2 class="font-display text-4xl text-slate-800 mb-4">Create Your Certificate</h2>
                                <p class="text-slate-600">Personalize your pledge to protect our shores.</p>
                            </div>

                            <form id="detailsForm" onsubmit="handleFormSubmit(event)" class="space-y-6">
                                <!-- Photo Upload -->
                                <div class="flex flex-col items-center gap-6">
                                    <div class="relative group cursor-pointer"
                                        onclick="document.getElementById('photoInput').click()">
                                        <div
                                            class="w-32 h-32 rounded-full border-4 border-slate-100 flex items-center justify-center overflow-hidden bg-slate-50 group-hover:border-primary transition-all duration-300 shadow-lg">
                                            <img id="photoPreview" class="hidden w-full h-full object-cover" />
                                            <div id="photoPlaceholder" class="text-center p-2">
                                                <span
                                                    class="material-icons-outlined text-3xl text-slate-400 mb-1 group-hover:text-primary transition-colors">add_a_photo</span>
                                            </div>
                                        </div>
                                        <div
                                            class="absolute -bottom-2 -right-2 w-10 h-10 bg-primary rounded-full flex items-center justify-center shadow-lg transform transition-transform group-hover:scale-110">
                                            <span class="material-icons-outlined text-white text-lg">edit</span>
                                        </div>
                                    </div>
                                    <div class="flex gap-4">
                                        <button type="button" onclick="document.getElementById('photoInput').click()"
                                            class="text-sm font-bold text-primary hover:text-sky-600 tracking-wide uppercase">
                                            Upload Photo
                                        </button>
                                        <span class="text-slate-300">|</span>
                                        <button type="button" onclick="openCameraModal()"
                                            class="text-sm font-bold text-primary hover:text-sky-600 tracking-wide uppercase">
                                            Use Camera
                                        </button>
                                    </div>
                                    <input type="file" id="photoInput" accept="image/png, image/jpeg" class="hidden"
                                        onchange="handleFileSelect(event)" />
                                </div>

                                <div class="space-y-5">
                                    <div>
                                        <label
                                            class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 ml-1">Full
                                            Name</label>
                                        <input id="fullName" required type="text" placeholder="e.g. Jane Doe"
                                            class="w-full px-5 py-4 rounded-xl border border-slate-200 bg-slate-50 text-slate-800 placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all" />
                                    </div>

                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                                        <div>
                                            <label
                                                class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 ml-1">WhatsApp</label>
                                            <div
                                                class="flex rounded-xl border border-slate-200 bg-slate-50 overflow-hidden focus-within:border-primary focus-within:ring-1 focus-within:ring-primary transition-all">
                                                <div class="w-[30%] border-r border-slate-200 bg-slate-100 relative">
                                                    <select id="countryCode"
                                                        class="w-full h-full bg-transparent border-none text-slate-700 text-sm font-medium text-center appearance-none focus:ring-0 cursor-pointer pl-2 pr-6 py-4">
                                                        <option value="+91">+91</option>
                                                    </select>
                                                    <span
                                                        class="absolute right-1 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400">
                                                        <span class="material-icons-outlined text-sm">expand_more</span>
                                                    </span>
                                                </div>
                                                <input id="phone" required type="tel" placeholder="98765 43210"
                                                    class="w-[70%] bg-transparent border-none text-slate-800 placeholder-slate-400 focus:ring-0 px-4 py-4" />
                                            </div>
                                        </div>

                                        <div>
                                            <label
                                                class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2 ml-1">Email</label>
                                            <input id="email" required type="email" placeholder="name@example.com"
                                                class="w-full px-5 py-4 rounded-xl border border-slate-200 bg-slate-50 text-slate-800 placeholder-slate-400 focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-all" />
                                        </div>
                                    </div>
                                </div>

                                <!-- Checkboxes -->
                                <div class="space-y-4 pt-2">
                                    <label class="flex items-start gap-4 cursor-pointer group">
                                        <div class="relative flex items-center h-5">
                                            <input id="marketingCheckbox" type="checkbox"
                                                class="h-5 w-5 rounded border-slate-300 text-primary focus:ring-primary cursor-pointer" />
                                        </div>
                                        <span class="text-sm text-slate-600">I agree to receive updates about the
                                            campaign.</span>
                                    </label>
                                    <label class="flex items-start gap-4 cursor-pointer group">
                                        <div class="relative flex items-center h-5">
                                            <input id="consentCheckbox" required type="checkbox"
                                                class="h-5 w-5 rounded border-slate-300 text-primary focus:ring-primary cursor-pointer" />
                                        </div>
                                        <div class="text-sm text-slate-600">
                                            <span>I agree to the processing of my data. </span>
                                            <a href="privacy-policy.html" target="_blank"
                                                class="text-primary hover:text-sky-600 underline">Privacy Policy</a>
                                        </div>
                                    </label>
                                </div>
                                <!-- Hidden Honeypot -->
                                <div class="opacity-0 absolute -z-50 pointer-events-none">
                                    <input type="text" id="website_field" name="website" tabindex="-1"
                                        autocomplete="off">
                                </div>

                                <!-- Actions -->
                                <!-- Added Cancel button to return to home -->
                                <div class="flex gap-4">
                                    <button type="button" onclick="goToStep('landing')"
                                        class="w-1/3 px-6 py-4 rounded-xl border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-colors">
                                        BACK
                                    </button>
                                    <button type="submit"
                                        class="w-2/3 px-6 py-4 rounded-xl bg-primary hover:bg-sky-600 text-white font-bold tracking-wide shadow-lg shadow-sky-500/20 transition-all transform hover:-translate-y-1">
                                        PREVIEW CERTIFICATE
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 3: PREVIEW -->
        <div id="step-preview" class="step">
            <div class="w-full py-20 min-h-screen flex items-center justify-center bg-background-light">
                <div class="max-w-2xl w-full mx-4 flex flex-col items-center">
                    <div class="text-center mb-10">
                        <h2 class="font-display text-4xl text-slate-800 mb-2">Preview Certificate</h2>
                        <p class="text-slate-600">One last look before you save it.</p>
                    </div>

                    <!-- Canvas -->
                    <div id="certificate-wrapper"
                        class="relative w-full max-w-sm mx-auto mb-10 rounded-xl overflow-hidden shadow-2xl border border-slate-200 bg-white transform transition-transform hover:scale-[1.01]">
                        <div id="certificate-visual"
                            class="relative w-full aspect-[3/4.2] bg-white overflow-hidden text-gray-900">
                            <img src="poster_bg.png" class="absolute inset-0 w-full h-full object-cover"
                                alt="Certificate Background">
                            <div class="absolute inset-0 z-10 w-full h-full">
                                <!-- Photo Restored to previous position -->
                                <div
                                    class="absolute top-[6.3%] left-[8.3%] w-[45.0%] aspect-square rounded-full overflow-hidden bg-black/10">
                                    <img id="cert-user-photo" src="" class="w-full h-full object-cover"
                                        alt="Donor Photo">
                                </div>
                                <!-- Name Restored to previous position with smaller font -->
                                <div class="absolute top-[66.5%] left-[8%] w-[80%] text-left flex items-center h-[5%]">
                                    <h2
                                        class="text-base font-sans font-bold text-[#000] tracking-wide leading-none select-none">
                                        <span id="cert-user-name">Jane Doe</span>
                                    </h2>
                                </div>
                                <div id="cert-id" class="hidden"></div>
                                <div id="cert-date" class="hidden"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="flex gap-4 w-full">
                        <button onclick="goToStep('form')"
                            class="flex-1 px-8 py-4 rounded-xl border border-slate-200 text-slate-500 font-bold hover:bg-slate-50 transition-all">
                            EDIT
                        </button>
                        <button onclick="finalizeCertificate()"
                            class="flex-1 px-8 py-4 rounded-xl bg-primary hover:bg-sky-600 text-white font-bold tracking-wide shadow-lg shadow-sky-500/20 transition-all transform hover:-translate-y-1">
                            GET CERTIFICATE
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- STEP 4: SUCCESS -->
        <div id="step-success" class="step">
            <div class="w-full py-20 min-h-screen flex items-center justify-center bg-background-light">
                <div class="max-w-3xl w-full mx-4 flex flex-col items-center text-center">
                    <div class="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mb-8">
                        <span class="material-icons-outlined text-green-600 text-5xl">check_circle</span>
                    </div>
                    <h2 class="font-display text-5xl text-slate-800 mb-4">Thank You!</h2>
                    <p class="text-xl text-slate-600 mb-12 max-w-lg">
                        Your certificate is ready. Together, we are making waves for a cleaner future.
                    </p>

                    <!-- Final Cert Container -->
                    <div id="final-cert-container"
                        class="w-full max-w-sm mb-12 shadow-2xl rounded-xl overflow-hidden border border-slate-200">
                        <!-- JS Moves Node Here -->
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4 w-full max-w-md">
                        <button onclick="downloadPDF()"
                            class="flex-1 px-8 py-4 rounded-xl bg-primary hover:bg-sky-600 text-white font-bold shadow-lg shadow-sky-500/20 transition-all flex items-center justify-center gap-2">
                            <span class="material-icons-outlined">download</span>
                            Download
                        </button>
                        <button onclick="shareImpact()"
                            class="flex-1 px-8 py-4 rounded-xl border-2 border-slate-200 hover:border-primary hover:text-primary text-slate-600 font-bold transition-all flex items-center justify-center gap-2">
                            <span class="material-icons-outlined">share</span>
                            Share
                        </button>
                    </div>

                    <button onclick="resetApp()"
                        class="mt-12 text-slate-400 hover:text-primary transition-colors flex items-center gap-2 text-sm uppercase tracking-widest font-bold">
                        <span class="material-icons-outlined text-lg">replay</span>
                        Create Another
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-slate-50 dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 pt-20 pb-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 lg:gap-8 mb-16">
                <div class="lg:col-span-2">
                    <div class="flex items-center mb-6">
                        <img src="ngo_logo.jpg" alt="Communitree Logo" class="h-10 w-auto" />
                    </div>
                    <p class="text-slate-500 dark:text-slate-400 text-sm leading-relaxed mb-6 max-w-sm">
                        Thank you for choosing action over indifference.
                        Together, small steps create lasting change.
                    </p>
                    <div class="flex space-x-4">
                        <a class="w-10 h-10 rounded bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 flex items-center justify-center text-slate-500 dark:text-slate-400 hover:text-primary dark:hover:text-primary hover:border-primary dark:hover:border-primary transition-all"
                            href="#">
                            <!-- Icons (Socials) -->
                        </a>
                        <!-- ... (Other Social Icons) -->
                    </div>
                </div>
                <!-- Links Columns (Static) -->
            </div>
            <div
                class="border-t border-slate-200 dark:border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4">
                <p class="text-xs text-slate-400 dark:text-slate-500">¬© 2024 PureShores. All rights reserved.</p>
                <div class="flex gap-6">
                    <a class="text-xs text-slate-500 dark:text-slate-400 hover:text-primary transition-colors"
                        href="#">Privacy Policy</a>
                    <a class="text-xs text-slate-500 dark:text-slate-400 hover:text-primary transition-colors"
                        href="#">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- MODALS -->

    <!-- Camera Modal -->
    <div id="camera-modal"
        class="fixed inset-0 z-50 hidden flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4">
        <div class="w-full max-w-lg bg-surface-light rounded-3xl overflow-hidden shadow-2xl flex flex-col">
            <div class="p-5 border-b border-slate-100 flex justify-between items-center">
                <h3 class="font-bold text-slate-800 flex items-center gap-2">
                    <span class="material-icons-outlined text-primary">photo_camera</span>
                    Take Photo
                </h3>
                <button onclick="closeCameraModal()" class="text-slate-400 hover:text-red-500 transition-colors">
                    <span class="material-icons-outlined">close</span>
                </button>
            </div>
            <div class="relative bg-black aspect-video flex items-center justify-center overflow-hidden">
                <video id="camera-feed" class="w-full h-full object-cover" autoplay playsinline></video>
            </div>
            <div class="p-6 flex justify-center bg-slate-50">
                <button onclick="capturePhoto()"
                    class="w-16 h-16 rounded-full border-4 border-primary flex items-center justify-center hover:bg-primary/10 transition-colors">
                    <div class="w-12 h-12 rounded-full bg-primary"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- Cropper Modal -->
    <div id="cropper-modal"
        class="fixed inset-0 z-[60] hidden flex items-center justify-center bg-slate-900/90 backdrop-blur-sm p-4">
        <div class="w-full max-w-2xl h-[80vh] bg-surface-light rounded-3xl overflow-hidden shadow-2xl flex flex-col">
            <div class="p-5 border-b border-slate-100 flex justify-between items-center">
                <h3 class="font-bold text-slate-800 flex items-center gap-2">
                    <span class="material-icons-outlined text-primary">crop</span>
                    Adjust Photo
                </h3>
                <button onclick="closeCropperModal()" class="text-slate-400 hover:text-red-500 transition-colors">
                    <span class="material-icons-outlined">close</span>
                </button>
            </div>
            <div class="flex-1 bg-slate-100 relative overflow-hidden flex items-center justify-center p-4">
                <div class="h-full w-full">
                    <img id="cropper-image" class="block max-w-full max-h-full mx-auto" />
                </div>
            </div>
            <div class="p-5 border-t border-slate-100 flex justify-end gap-4 bg-slate-50">
                <button onclick="closeCropperModal()"
                    class="px-6 py-3 rounded-xl text-slate-500 hover:bg-slate-200 font-bold transition-colors">
                    Cancel
                </button>
                <button onclick="saveCrop()"
                    class="px-8 py-3 rounded-xl bg-primary hover:bg-sky-600 text-white font-bold shadow-lg shadow-sky-500/20 transition-all">
                    Save Photo
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay"
        class="fixed inset-0 z-[100] hidden flex-col items-center justify-center bg-white/90 backdrop-blur-xl transition-all">
        <span class="loader mb-6"></span>
        <h3 id="loading-text" class="text-xl font-display font-medium text-slate-800 tracking-wide">Processing...</h3>
    </div>

    <!-- LOGIC SCRIPT (Preserved) -->
    <script>
        // --- PRELOAD ASSETS ---
        const preloadedImages = {};
        (function preloadAssets() {
            const imagesToPreload = ['poster_bg.png'];
            imagesToPreload.forEach(src => {
                const img = new Image();
                img.src = src;
                preloadedImages[src] = img;
            });
        })();

        // --- CONFIGURATION ---
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw7pJCl4Q5x8HhBpH8VqiOtPGUCFEVOUOAPFDLCr4U6EZlR5qXxrw81nU2EnV9qJcyT/exec";

        // --- GOOGLE SHEETS ---
        function submitToGoogleSheet() {
            if (!GOOGLE_SCRIPT_URL || GOOGLE_SCRIPT_URL.includes("YOUR_")) return;

            const payload = {
                fullName: userData.fullName,
                countryCode: userData.countryCode,
                phoneNumber: userData.phoneNumber,
                phone: userData.phone,
                email: userData.email,
                privacyConsent: userData.privacyConsent,
                marketingOptIn: userData.marketingOptIn
            };

            fetch(GOOGLE_SCRIPT_URL, {
                method: "POST",
                mode: "no-cors",
                headers: { "Content-Type": "text/plain;charset=utf-8" },
                body: JSON.stringify(payload)
            }).then(() => { }).catch(error => { console.error("Error submitting:", error); });
        }

        // State
        let userData = {
            fullName: '', countryCode: '', phoneNumber: '', phone: '', email: '',
            privacyConsent: false, marketingOptIn: false, photo: null
        };

        // Variables
        let cropper = null;
        let activeImageSource = null;

        // Navigation
        function goToStep(stepId) {
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            const target = document.getElementById(`step-${stepId}`);
            if (target) {
                target.classList.add('active');
                window.scrollTo(0, 0);
            }
            if (stepId === 'preview') updateCertificateDOM();
        }

        // --- COUNTRIES ---
        const countriesInfo = [
            { name: "India", code: "+91" }, { name: "USA", code: "+1" }, { name: "UK", code: "+44" },
            { name: "UAE", code: "+971" }, { name: "Australia", code: "+61" }, { name: "Canada", code: "+1" }
        ];

        function initCountries() {
            const select = document.getElementById('countryCode');
            select.innerHTML = '';
            countriesInfo.forEach(country => {
                const option = document.createElement('option');
                option.value = country.code;
                option.text = `${country.code}`;
                if (country.code === "+91") option.selected = true;
                select.appendChild(option);
            });
        }

        // --- CAMERA ---
        let stream = null;
        const videoElement = document.getElementById('camera-feed');

        async function openCameraModal() {
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: true });
                videoElement.srcObject = stream;
                document.getElementById('camera-modal').classList.remove('hidden');
            } catch (err) {
                alert("Could not access camera.");
            }
        }

        function closeCameraModal() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            document.getElementById('camera-modal').classList.add('hidden');
        }

        function capturePhoto() {
            if (!stream) return;
            const canvas = document.createElement('canvas');
            canvas.width = videoElement.videoWidth;
            canvas.height = videoElement.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.translate(canvas.width, 0);
            ctx.scale(-1, 1);
            ctx.drawImage(videoElement, 0, 0);
            const dataURL = canvas.toDataURL('image/jpeg');
            closeCameraModal();
            showLoading("Processing...");
            runAfterPaint(() => { hideLoading(); openCropperModal(dataURL); });
        }

        // --- CROPPER ---
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                showLoading("Analyzing...");
                runAfterPaint(() => {
                    const objectUrl = window.URL.createObjectURL(file);
                    const img = new Image();
                    img.src = objectUrl;
                    img.onload = () => {
                        hideLoading();
                        openCropperModal(objectUrl);
                    };
                });
            }
            event.target.value = '';
        }

        function openCropperModal(imageSrc) {
            const image = document.getElementById('cropper-image');
            activeImageSource = imageSrc;
            image.src = imageSrc;
            document.getElementById('cropper-modal').classList.remove('hidden');
            if (cropper) cropper.destroy();
            cropper = new Cropper(image, { aspectRatio: 1, viewMode: 1, dragMode: 'move', autoCropArea: 0.8 });
        }

        function closeCropperModal() {
            if (cropper) cropper.destroy();
            cropper = null;
            document.getElementById('cropper-modal').classList.add('hidden');
        }

        function saveCrop() {
            if (!cropper) return;
            showLoading("Saving crop...");
            runAfterPaint(() => {
                const canvas = cropper.getCroppedCanvas({ width: 1080, height: 1080 });
                userData.photo = canvas.toDataURL('image/jpeg', 1.0);
                hideLoading();
                updatePhotoPreviews();
                closeCropperModal();
            });
        }

        function updatePhotoPreviews() {
            document.getElementById('photoPreview').src = userData.photo;
            document.getElementById('photoPreview').classList.remove('hidden');
            document.getElementById('photoPlaceholder').classList.add('hidden');
            const certPhoto = document.getElementById('cert-user-photo');
            if (certPhoto) certPhoto.src = userData.photo;
        }

        // --- TOAST NOTIFICATIONS ---
        function showToast(message, type = 'error') {
            // Remove existing toast if any
            const existingToast = document.getElementById('toast-notification');
            if (existingToast) existingToast.remove();

            const toast = document.createElement('div');
            toast.id = 'toast-notification';
            toast.className = `fixed top-24 left-1/2 transform -translate-x-1/2 px-6 py-4 rounded-xl shadow-2xl z-[100] flex items-center gap-3 transition-all duration-300 opacity-0 translate-y-[-20px] ${type === 'error' ? 'bg-red-50 border border-red-200 text-red-800' : 'bg-green-50 border border-green-200 text-green-800'
                }`;

            const icon = type === 'error' ? 'error_outline' : 'check_circle';
            toast.innerHTML = `
                <span class="material-icons-outlined text-2xl">${icon}</span>
                <span class="font-bold text-sm tracking-wide">${message}</span>
                <button onclick="this.parentElement.remove()" class="ml-4 opacity-50 hover:opacity-100"><span class="material-icons-outlined text-lg">close</span></button>
            `;

            document.body.appendChild(toast);

            // Animate in
            requestAnimationFrame(() => {
                toast.classList.remove('opacity-0', 'translate-y-[-20px]');
            });

            // Auto dismiss after 4 seconds
            setTimeout(() => {
                if (document.body.contains(toast)) {
                    toast.classList.add('opacity-0', 'translate-y-[-20px]');
                    setTimeout(() => toast.remove(), 300);
                }
            }, 4000);
        }

        // --- FORM HELPERS ---
        function sanitizeInput(str) {
            const temp = document.createElement('div'); temp.textContent = str; return temp.innerHTML;
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            const honeypot = document.getElementById('website_field');
            if (honeypot && honeypot.value) return;

            const fullName = document.getElementById('fullName').value;
            const phone = document.getElementById('phone').value;

            if (!fullName || !phone) return showToast("Please fill in all required fields.", "error");
            if (!userData.photo) return showToast("Please upload or capture a photo.", "error");
            if (!document.getElementById('consentCheckbox').checked) return showToast("You must agree to the privacy policy.", "error");

            showLoading("Generating preview...");
            runAfterPaint(() => {
                userData.fullName = sanitizeInput(fullName);
                userData.countryCode = document.getElementById('countryCode').value;
                userData.phoneNumber = phone;
                userData.phone = `${userData.countryCode} ${phone}`;
                userData.email = sanitizeInput(document.getElementById('email').value);
                userData.privacyConsent = true;
                userData.marketingOptIn = document.getElementById('marketingCheckbox').checked;
                hideLoading();
                goToStep('preview');
            });
        }

        function updateCertificateDOM() {
            document.getElementById('cert-user-name').textContent = userData.fullName;
            const certPhoto = document.getElementById('cert-user-photo');
            if (certPhoto) certPhoto.src = userData.photo;
        }

        function finalizeCertificate() {
            showLoading("Finalizing...");
            runAfterPaint(() => {
                submitToGoogleSheet();
                hideLoading();
                const certNode = document.querySelector('#certificate-visual').parentNode;
                document.getElementById('final-cert-container').appendChild(certNode);
                goToStep('success');
            });
        }

        // --- UTILS ---
        function showLoading(msg) {
            document.getElementById('loading-text').textContent = msg;
            document.getElementById('loading-overlay').classList.remove('hidden');
            document.getElementById('loading-overlay').classList.add('flex');
        }
        function hideLoading() {
            document.getElementById('loading-overlay').classList.add('hidden');
            document.getElementById('loading-overlay').classList.remove('flex');
        }
        function runAfterPaint(cb) { setTimeout(cb, 16); }

        function downloadPDF() {
            showLoading("Downloading...");
            runAfterPaint(() => {
                const certElement = document.getElementById('certificate-visual');
                html2canvas(certElement, { scale: 3, useCORS: true, backgroundColor: '#ffffff' }).then(canvas => {
                    const link = document.createElement('a');
                    link.download = `Certificate-${userData.fullName.replace(/\s+/g, '-')}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                    hideLoading();
                });
            });
        }

        function shareImpact() {
            showLoading("Sharing...");
            runAfterPaint(() => {
                const certElement = document.getElementById('certificate-visual');
                html2canvas(certElement, { scale: 3, useCORS: true, backgroundColor: '#ffffff' }).then(canvas => {
                    canvas.toBlob(blob => {
                        if (blob && navigator.share) {
                            const file = new File([blob], 'cert.png', { type: 'image/png' });
                            navigator.share({ files: [file], title: 'PureShores Certificate' }).then(() => hideLoading()).catch(() => hideLoading());
                        } else {
                            hideLoading();
                            downloadPDF();
                        }
                    }, 'image/png');
                });
            });
        }

        function resetApp() {
            window.location.reload();
        }

        initCountries();
    </script>
</body>

</html>